webpackJsonp([1],{"7zck":function(t,e){},NHnr:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("7+uW"),a={name:"App",data:function(){return{email:""}},methods:{test:function(){localStorage.user=null,this.$router.go({path:this.$route.path}),this.$router.push("/login")}},computed:{loggedin:function(){return!!localStorage.user&&null!==JSON.parse(localStorage.user)}},created:function(){if(localStorage.user){var t=JSON.parse(localStorage.user);null!==t&&(this.email=t.email)}}},o={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",[r("div",{attrs:{id:"app"}},[r("v-toolbar",{attrs:{dark:"",color:"primary"}},[r("v-toolbar-title",[t._v("Polling App")]),t._v(" "),r("v-spacer"),t._v(" "),t.loggedin?r("h4",[t._v(t._s(t.email))]):t._e(),t._v(" "),r("v-toolbar-items",[t.loggedin?t._e():r("v-btn",{attrs:{flat:"",to:"/login"}},[t._v("Login")]),t._v(" "),t.loggedin?t._e():r("v-btn",{attrs:{flat:"",to:"/signup"}},[t._v("Signup")]),t._v(" "),t.loggedin?r("v-btn",{attrs:{flat:""},on:{click:t.test}},[t._v("Logout")]):t._e()],1)],1),t._v(" "),r("div",{staticClass:"container"},[r("router-view")],1)],1)])},staticRenderFns:[]},s=r("VU/8")(a,o,!1,null,null,null).exports,i=r("/ocq"),l=r("Xxa5"),u=r.n(l),c=r("mvHQ"),d=r.n(c),p=r("exGp"),v=r.n(p),f="https://exclusive-parenthesis.glitch.me/",h={newPoll:function(){var t=v()(u.a.mark(function t(e){var r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(f+"api/new",{method:"post",headers:new Headers({"Content-type":"application/json"}),body:d()(e)}).catch(function(t){return console.log(t)});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getPoll:function(){var t=v()(u.a.mark(function t(e){var r,n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(f+"api/"+e.id,{method:"post",headers:new Headers({"Content-type":"application/json"}),body:d()(e)});case 2:return r=t.sent,t.next=5,r.json();case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),updatePoll:function(t){return fetch(f+"api/"+t.id,{method:"put",headers:new Headers({"Content-type":"application/json"}),body:d()(t)})},getAll:function(){var t=v()(u.a.mark(function t(e){var r,n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(f+"api",{method:"post",headers:new Headers({"Content-type":"application/json"}),body:d()(e)});case 2:return r=t.sent,t.next=5,r.json();case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),deletePoll:function(t){return fetch(f+"api/"+t,{method:"delete"})},getPollData:function(){var t=v()(u.a.mark(function t(e){var r,n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(f+"api/data/"+e);case 2:return r=t.sent,t.next=5,r.json();case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),vote:function(){var t=v()(u.a.mark(function t(e){var r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(f+"api/poll/"+e.id,{method:"post",headers:new Headers({"Content-type":"application/json"}),body:d()(e)});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),signup:function(){var t=v()(u.a.mark(function t(e){var r,n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(f+"api/users/signup",{method:"post",headers:new Headers({"Content-type":"application/json"}),body:d()(e)});case 2:return r=t.sent,t.next=5,r.json();case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),login:function(){var t=v()(u.a.mark(function t(e){var r,n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(f+"api/users/login",{method:"post",headers:new Headers({"Content-type":"application/json"}),body:d()(e)});case 2:return r=t.sent,t.next=5,r.json();case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},m={name:"new",data:function(){return{title:null,numopt:"",items:["2","3","4","5"],options:[],uid:null}},methods:{send:function(){var t=this,e=[];this.options.forEach(function(t){e.push(t.value)});var r={};r.user=this.uid,r.title=this.title,r.options=e,console.log(r),h.newPoll(r).then(function(){return t.$router.push("/")})}},watch:{numopt:function(){this.options=[];for(var t=0;t<this.numopt;t++){var e={label:"Options "+(t+1),value:""};this.options.push(e)}}},created:function(){this.uid=JSON.parse(localStorage.user).id}},_={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:"",sm8:"","offset-sm2":"",fluid:""}},[r("h1",[t._v("New Poll")]),t._v(" "),r("v-card",[r("v-card-text",[r("v-container",[r("form",[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{label:"Poll Title"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),r("v-flex",[r("v-select",{attrs:{items:t.items,label:"Number Of Options"},model:{value:t.numopt,callback:function(e){t.numopt=e},expression:"numopt"}})],1),t._v(" "),r("v-flex",t._l(t.options,function(e){return r("v-text-field",{key:e.index,attrs:{label:e.label},model:{value:e.value,callback:function(r){t.$set(e,"value",r)},expression:"option.value"}})})),t._v(" "),r("v-btn",{attrs:{color:"gray",to:"/"}},[t._v("Cancel")]),t._v(" "),r("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.send()}}},[t._v("Add")])],1)])],1)],1)],1)],1)],1)},staticRenderFns:[]},g=r("VU/8")(m,_,!1,null,null,null).exports,x={name:"edit",data:function(){return{title:"",id:"",uid:null}},created:function(){var t=this;this.uid=JSON.parse(localStorage.user).id;var e={id:this.$route.params.id,uid:this.uid};h.getPoll(e).then(function(e){t.title=e.title,t.id=e.id})},methods:{update:function(){var t=this,e={};e.title=this.title,e.id=this.id,h.updatePoll(e).then(function(){return t.$router.push("/")})}}},w={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:"",sm8:"","offset-sm2":""}},[r("h1",[t._v("New Poll")]),t._v(" "),r("v-card",[r("v-card-text",[r("v-container",[r("form",[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{label:"Poll Title","v-model":t.title},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),r("v-btn",{attrs:{color:"gray",to:"/"}},[t._v("Cancel")]),t._v(" "),r("v-btn",{attrs:{color:"primary"},on:{click:t.update}},[t._v("Save")])],1)])],1)],1)],1)],1)],1)},staticRenderFns:[]},b=r("VU/8")(x,w,!1,null,null,null).exports,y={data:function(){return{email:"",password:"",error:!1,errormsg:""}},methods:{login:function(){var t=this,e={email:this.email,password:this.password};h.login(e).then(function(e){e.error?(t.error=!0,t.errormsg=e.errormsg):(localStorage.user=d()(e.user),t.error=!1,t.$router.go({path:t.$route.path}),t.$router.push("/"))})}},created:function(){console.log(this.$route.path+"/login")},computed:{val:function(){return""==this.email||""==this.password}}},k={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:"",sm7:"","offset-sm2":""}},[r("h1",[t._v("Login")]),t._v(" "),r("v-card",[r("v-card-text",[r("v-container",[r("v-alert",{attrs:{value:t.error,type:"error"}},[t._v("\r\n          "+t._s(t.errormsg)+"\r\n             ")]),t._v(" "),r("form",{on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{label:"Email",required:"",autofocus:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],1),t._v(" "),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{label:"Password",type:"password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),t._v(" "),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-btn",{attrs:{color:"primary",type:"submit",disabled:t.val}},[t._v("Login")])],1)],1)],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},S=r("VU/8")(y,k,!1,null,null,null).exports,P={name:"home",data:function(){return{loading:!0,data:[],uid:null}},created:function(){var t=this;this.uid=JSON.parse(localStorage.user).id,h.getAll({id:this.uid}).then(function(e){t.data=e,t.loading=!1})},methods:{del:function(t){var e=this;h.deletePoll(t).then(function(t){return h.getAll({id:e.uid}).then(function(t){return e.data=t})})}}},$={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h1",[t._v("home")]),t._v(" "),r("v-btn",{attrs:{fixed:"",dark:"",fab:"",bottom:"",right:"",color:"pink",append:"",to:"/new"}},[r("v-icon",[t._v("add")])],1),t._v(" "),r("v-container",{staticStyle:{"min-height":"0"},attrs:{fluid:"","grid-list-lg":""}},[t._l(t.data,function(e){return r("v-flex",{key:e.id,attrs:{xs12:"",lg6:"",md6:""}},[r("v-card",{staticClass:"white--text",attrs:{color:"blue",hover:"",transition:"slide-y-transition"}},[r("v-card-title",{attrs:{"primary-title":""}},[r("div",[r("h2",[t._v(t._s(e.title))]),r("br"),t._v(" "),r("div",[t._v("Total Votes :  "+t._s(e.num))])])]),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{icon:"",to:{name:"edit",params:{id:e.id}}}},[r("v-icon",[t._v("edit")])],1),t._v(" "),r("v-btn",{attrs:{icon:""},on:{click:function(r){t.del(e.id)}}},[r("v-icon",[t._v("delete")])],1),t._v(" "),r("v-btn",{attrs:{icon:"",to:{name:"vote",params:{id:e.id}}}},[r("v-icon",[t._v("content_copy")])],1),t._v(" "),r("v-spacer")],1)],1)],1)}),t._v(" "),t.loading?r("v-layout",{attrs:{slot:"activator",row:"",wrap:""},slot:"activator"},[r("v-progress-circular",{attrs:{indeterminate:"",color:"primary",size:40}})],1):t._e()],2)],1)},staticRenderFns:[]};var E=r("VU/8")(P,$,!1,function(t){r("pUfo")},"data-v-31314dec",null).exports,C={data:function(){return{data:{},op:"",email:"",error:!1,chartOptions:{animationEnabled:!0,title:{text:""},data:[{type:"column",dataPoints:[]}]},chart:null}},created:function(){this.getdata()},methods:{vote:function(){var t=this,e={};e.email=this.email,e.response=this.op,e.id=this.$route.params.id,h.vote(e).then(function(e){setTimeout(function(){t.getdata()},400)})},render:function(){this.chart=new CanvasJS.Chart("chartContainer",this.chartOptions),this.chart.render()},getdata:function(){var t=this;h.getPollData(this.$route.params.id).then(function(e){t.data=e,t.data.msg&&(console.log(t.data.msg),t.error=!0),t.chartOptions.title.text=e.title;var r=[];e.data.forEach(function(t){var e={label:t.name,y:t.count};r.push(e)}),t.chartOptions.data[0].dataPoints=r,t.render()}).catch(function(t){return console.log(t)})}},computed:{ema:function(){return""==this.email}}},O={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:"",sm8:"","offset-sm2":""}},[r("h1",[t._v("Vote")]),t._v(" "),t.error?t._e():r("v-card",[r("v-card-text",[r("v-container",[r("div",{staticStyle:{height:"360px",width:"100%"},attrs:{id:"chartContainer"}}),t._v(" "),r("h4",[t._v(t._s(t.data.title))]),t._v(" "),r("v-radio-group",{model:{value:t.op,callback:function(e){t.op=e},expression:"op"}},t._l(t.data.options,function(t){return r("v-radio",{key:t.index,attrs:{label:t.text,value:t.text}})})),t._v(" "),r("v-text-field",{attrs:{label:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),r("v-btn",{attrs:{color:"primary",disabled:t.ema},on:{click:t.vote}},[t._v("Vote ")])],1)],1)],1),t._v(" "),t.error?r("v-flex",{attrs:{xs12:"",sm8:"","offset-sm3":""}},[r("h1",[t._v("Error 404 Poll Not Found")])]):t._e()],1)],1)],1)},staticRenderFns:[]},j=r("VU/8")(C,O,!1,null,null,null).exports,N={data:function(){return{email:"",password:"",cpassword:"",error:!1,errormsg:"",done:!1}},computed:{pas:function(){return this.password!==this.cpassword?"Password doesn't match":""},valid:function(){return this.pass&&""!==this.email&&this.emp},pass:function(){return this.password==this.cpassword},emp:function(){return""!==this.password&&""!==this.cpassword}},methods:{singup:function(){var t=this,e={email:this.email,pass:this.password};h.signup(e).then(function(e){e.error?(t.errormsg=e.errormsg,t.error=!0):(t.done=!0,setTimeout(function(){t.$router.push("/login")},2400))})}}},J={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[r("h1",[t._v("SignUP")]),t._v(" "),r("v-card",[r("v-card-text",[r("v-container",[r("v-alert",{attrs:{value:t.error,type:"error"}},[t._v("\r\n          "+t._s(t.errormsg)+"\r\n             ")]),t._v(" "),r("v-alert",{attrs:{value:t.done,type:"success"}},[t._v("\r\n      Success! you will be redirected to login page\r\n    ")]),t._v(" "),r("form",{on:{submit:function(e){return e.preventDefault(),t.singup(e)}}},[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{label:"Email",required:"",autofocus:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],1),t._v(" "),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{label:"Password",type:"password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),t._v(" "),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{label:"Confirm Password",type:"password",rules:[t.pas],required:""},model:{value:t.cpassword,callback:function(e){t.cpassword=e},expression:"cpassword"}})],1)],1),t._v(" "),r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-btn",{attrs:{color:"primary",type:"submit",disabled:!t.valid}},[t._v("signup")])],1)],1)],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},V=r("VU/8")(N,J,!1,null,null,null).exports,H=function(t,e,r){localStorage.user?null!==JSON.parse(localStorage.user)?r():r("/login"):r("/login")},U=function(t,e,r){localStorage.user?null!==JSON.parse(localStorage.user)?r("/"):r():r()};n.a.use(i.a);var A=new i.a({routes:[{path:"/",name:"root",component:E,beforeEnter:H},{path:"/new",name:"new",component:g,beforeEnter:H},{path:"/edit/:id",name:"edit",component:b,beforeEnter:H},{path:"/login",name:"login",component:S,beforeEnter:U},{path:"/vote/:id",name:"vote",component:j},{path:"/signup",name:"singup",component:V,beforeEnter:U}]}),F=r("3EgV"),R=r.n(F);r("7zck"),r("gJtD");n.a.use(R.a),n.a.config.productionTip=!0,new n.a({el:"#app",router:A,components:{App:s},template:"<App/>"})},gJtD:function(t,e){},pUfo:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.73c7b1fac9fc7e6c2e80.js.map